{"ast":null,"code":"import axios from'axios';// Create axios instance with base configuration\nconst api=axios.create({baseURL:process.env.REACT_APP_API_URL||\"\".concat(window.location.protocol,\"//\").concat(window.location.hostname,\":8000/api\"),headers:{'Content-Type':'application/json'}});// Request interceptor to add auth token\napi.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;});// Response interceptor for error handling\napi.interceptors.response.use(response=>response,error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){localStorage.removeItem('token');window.location.href='/login';}return Promise.reject(error);});// Authentication API\nexport const authAPI={login:async()=>{console.log('Attempting login with baseURL:',api.defaults.baseURL);try{const response=await api.post('/auth/login');console.log('Login successful:',response.data);return response.data;}catch(error){var _error$response2;console.error('Login failed:',error);console.error('Error details:',(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data);throw error;}},getCurrentUser:async()=>{const response=await api.get('/auth/me');return response.data;},logout:async()=>{const response=await api.post('/auth/logout');return response.data;}};// Business Interest API\nexport const businessInterestAPI={create:async data=>{const response=await api.post('/analysis/business-interest',data);return response.data;},getAll:async()=>{const response=await api.get('/analysis/business-interest');return response.data;},getById:async id=>{const response=await api.get(\"/analysis/business-interest/\".concat(id));return response.data;},delete:async id=>{const response=await api.delete(\"/analysis/business-interest/\".concat(id));return response.data;}};// Sources API\nexport const sourcesAPI={getAll:async()=>{const response=await api.get('/sources/');return response.data;},add:async data=>{console.log('sourcesAPI.add called with:',data);console.log('API base URL:',api.defaults.baseURL);const response=await api.post('/sources/',data);console.log('API response:',response.data);return response.data;},remove:async sourceId=>{const response=await api.delete(\"/sources/\".concat(sourceId));return response.data;},getPopular:async()=>{const response=await api.get('/sources/popular');return response.data;}};// News Analysis API\nexport const newsAPI={analyze:async data=>{const response=await api.post('/news/analyze',data);return response.data;},getSessions:async()=>{const response=await api.get('/news/sessions');return response.data;},getSession:async sessionId=>{const response=await api.get(\"/news/sessions/\".concat(sessionId));return response.data;},deleteSession:async sessionId=>{const response=await api.delete(\"/news/sessions/\".concat(sessionId));return response.data;}};// Analysis API\nexport const analysisAPI={getStatistics:async()=>{const response=await api.get('/analysis/statistics');return response.data;},getDashboard:async()=>{const response=await api.get('/analysis/dashboard');return response.data;}};export default api;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","concat","window","location","protocol","hostname","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","error","_error$response","status","removeItem","href","Promise","reject","authAPI","login","console","log","defaults","post","data","_error$response2","getCurrentUser","get","logout","businessInterestAPI","getAll","getById","id","delete","sourcesAPI","add","remove","sourceId","getPopular","newsAPI","analyze","getSessions","getSession","sessionId","deleteSession","analysisAPI","getStatistics","getDashboard"],"sources":["/Users/yousifkashef/PyCharmMiscProject/news_analyzer_fastapi/frontend/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\nimport {\n  LoginResponse,\n  BusinessInterest,\n  BusinessInterestCreate,\n  Source,\n  SourceCreate,\n  SourceListResponse,\n  PopularSources,\n  NewsAnalysisRequest,\n  NewsAnalysisResponse,\n  AnalysisSession,\n  UserStatistics,\n  DashboardData,\n} from '../types';\n\n// Create axios instance with base configuration\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || `${window.location.protocol}//${window.location.hostname}:8000/api`,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Response interceptor for error handling\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\n// Authentication API\nexport const authAPI = {\n  login: async (): Promise<LoginResponse> => {\n    console.log('Attempting login with baseURL:', api.defaults.baseURL);\n    try {\n      const response = await api.post<LoginResponse>('/auth/login');\n      console.log('Login successful:', response.data);\n      return response.data;\n    } catch (error: any) {\n      console.error('Login failed:', error);\n      console.error('Error details:', error.response?.data);\n      throw error;\n    }\n  },\n\n  getCurrentUser: async () => {\n    const response = await api.get('/auth/me');\n    return response.data;\n  },\n\n  logout: async () => {\n    const response = await api.post('/auth/logout');\n    return response.data;\n  },\n};\n\n// Business Interest API\nexport const businessInterestAPI = {\n  create: async (data: BusinessInterestCreate): Promise<BusinessInterest> => {\n    const response = await api.post<BusinessInterest>('/analysis/business-interest', data);\n    return response.data;\n  },\n\n  getAll: async (): Promise<BusinessInterest[]> => {\n    const response = await api.get<BusinessInterest[]>('/analysis/business-interest');\n    return response.data;\n  },\n\n  getById: async (id: number): Promise<BusinessInterest> => {\n    const response = await api.get<BusinessInterest>(`/analysis/business-interest/${id}`);\n    return response.data;\n  },\n\n  delete: async (id: number) => {\n    const response = await api.delete(`/analysis/business-interest/${id}`);\n    return response.data;\n  },\n};\n\n// Sources API\nexport const sourcesAPI = {\n  getAll: async (): Promise<SourceListResponse> => {\n    const response = await api.get<SourceListResponse>('/sources/');\n    return response.data;\n  },\n\n  add: async (data: SourceCreate): Promise<Source> => {\n    console.log('sourcesAPI.add called with:', data);\n    console.log('API base URL:', api.defaults.baseURL);\n    const response = await api.post<Source>('/sources/', data);\n    console.log('API response:', response.data);\n    return response.data;\n  },\n\n  remove: async (sourceId: number) => {\n    const response = await api.delete(`/sources/${sourceId}`);\n    return response.data;\n  },\n\n  getPopular: async (): Promise<PopularSources> => {\n    const response = await api.get<PopularSources>('/sources/popular');\n    return response.data;\n  },\n};\n\n// News Analysis API\nexport const newsAPI = {\n  analyze: async (data: NewsAnalysisRequest): Promise<NewsAnalysisResponse> => {\n    const response = await api.post<NewsAnalysisResponse>('/news/analyze', data);\n    return response.data;\n  },\n\n  getSessions: async (): Promise<AnalysisSession[]> => {\n    const response = await api.get<AnalysisSession[]>('/news/sessions');\n    return response.data;\n  },\n\n  getSession: async (sessionId: number): Promise<NewsAnalysisResponse> => {\n    const response = await api.get<NewsAnalysisResponse>(`/news/sessions/${sessionId}`);\n    return response.data;\n  },\n\n  deleteSession: async (sessionId: number) => {\n    const response = await api.delete(`/news/sessions/${sessionId}`);\n    return response.data;\n  },\n};\n\n// Analysis API\nexport const analysisAPI = {\n  getStatistics: async (): Promise<UserStatistics> => {\n    const response = await api.get<UserStatistics>('/analysis/statistics');\n    return response.data;\n  },\n\n  getDashboard: async (): Promise<DashboardData> => {\n    const response = await api.get<DashboardData>('/analysis/dashboard');\n    return response.data;\n  },\n};\n\nexport default api; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}