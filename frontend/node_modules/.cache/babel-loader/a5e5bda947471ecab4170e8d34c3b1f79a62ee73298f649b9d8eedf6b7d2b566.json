{"ast":null,"code":"import axios from'axios';// Create axios instance with base configuration\nconst api=axios.create({baseURL:process.env.REACT_APP_API_URL||'/api',// Use environment variable or relative URL\nheaders:{'Content-Type':'application/json'}});// Request interceptor to add auth token\napi.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;});// Response interceptor for error handling\napi.interceptors.response.use(response=>response,error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){localStorage.removeItem('token');window.location.href='/login';}return Promise.reject(error);});// Authentication API\nexport const authAPI={login:async()=>{const response=await api.post('/auth/login');return response.data;},getCurrentUser:async()=>{const response=await api.get('/auth/me');return response.data;},logout:async()=>{const response=await api.post('/auth/logout');return response.data;}};// Business Interest API\nexport const businessInterestAPI={create:async data=>{const response=await api.post('/analysis/business-interest',data);return response.data;},getAll:async()=>{const response=await api.get('/analysis/business-interest');return response.data;},getById:async id=>{const response=await api.get(\"/analysis/business-interest/\".concat(id));return response.data;},delete:async id=>{const response=await api.delete(\"/analysis/business-interest/\".concat(id));return response.data;}};// Sources API\nexport const sourcesAPI={getAll:async()=>{const response=await api.get('/sources/');return response.data;},add:async data=>{console.log('sourcesAPI.add called with:',data);console.log('API base URL:',api.defaults.baseURL);const response=await api.post('/sources/',data);console.log('API response:',response.data);return response.data;},remove:async sourceId=>{const response=await api.delete(\"/sources/\".concat(sourceId));return response.data;},getPopular:async()=>{const response=await api.get('/sources/popular');return response.data;}};// News Analysis API\nexport const newsAPI={analyze:async data=>{const response=await api.post('/news/analyze',data);return response.data;},getSessions:async()=>{const response=await api.get('/news/sessions');return response.data;},getSession:async sessionId=>{const response=await api.get(\"/news/sessions/\".concat(sessionId));return response.data;},deleteSession:async sessionId=>{const response=await api.delete(\"/news/sessions/\".concat(sessionId));return response.data;}};// Analysis API\nexport const analysisAPI={getStatistics:async()=>{const response=await api.get('/analysis/statistics');return response.data;},getDashboard:async()=>{const response=await api.get('/analysis/dashboard');return response.data;}};export default api;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","response","error","_error$response","status","removeItem","window","location","href","Promise","reject","authAPI","login","post","data","getCurrentUser","get","logout","businessInterestAPI","getAll","getById","id","delete","sourcesAPI","add","console","log","defaults","remove","sourceId","getPopular","newsAPI","analyze","getSessions","getSession","sessionId","deleteSession","analysisAPI","getStatistics","getDashboard"],"sources":["/Users/yousifkashef/PyCharmMiscProject/news_analyzer_fastapi/frontend/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\nimport {\n  LoginResponse,\n  BusinessInterest,\n  BusinessInterestCreate,\n  Source,\n  SourceCreate,\n  SourceListResponse,\n  PopularSources,\n  NewsAnalysisRequest,\n  NewsAnalysisResponse,\n  AnalysisSession,\n  UserStatistics,\n  DashboardData,\n} from '../types';\n\n// Create axios instance with base configuration\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || '/api',  // Use environment variable or relative URL\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Response interceptor for error handling\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\n// Authentication API\nexport const authAPI = {\n  login: async (): Promise<LoginResponse> => {\n    const response = await api.post<LoginResponse>('/auth/login');\n    return response.data;\n  },\n\n  getCurrentUser: async () => {\n    const response = await api.get('/auth/me');\n    return response.data;\n  },\n\n  logout: async () => {\n    const response = await api.post('/auth/logout');\n    return response.data;\n  },\n};\n\n// Business Interest API\nexport const businessInterestAPI = {\n  create: async (data: BusinessInterestCreate): Promise<BusinessInterest> => {\n    const response = await api.post<BusinessInterest>('/analysis/business-interest', data);\n    return response.data;\n  },\n\n  getAll: async (): Promise<BusinessInterest[]> => {\n    const response = await api.get<BusinessInterest[]>('/analysis/business-interest');\n    return response.data;\n  },\n\n  getById: async (id: number): Promise<BusinessInterest> => {\n    const response = await api.get<BusinessInterest>(`/analysis/business-interest/${id}`);\n    return response.data;\n  },\n\n  delete: async (id: number) => {\n    const response = await api.delete(`/analysis/business-interest/${id}`);\n    return response.data;\n  },\n};\n\n// Sources API\nexport const sourcesAPI = {\n  getAll: async (): Promise<SourceListResponse> => {\n    const response = await api.get<SourceListResponse>('/sources/');\n    return response.data;\n  },\n\n  add: async (data: SourceCreate): Promise<Source> => {\n    console.log('sourcesAPI.add called with:', data);\n    console.log('API base URL:', api.defaults.baseURL);\n    const response = await api.post<Source>('/sources/', data);\n    console.log('API response:', response.data);\n    return response.data;\n  },\n\n  remove: async (sourceId: number) => {\n    const response = await api.delete(`/sources/${sourceId}`);\n    return response.data;\n  },\n\n  getPopular: async (): Promise<PopularSources> => {\n    const response = await api.get<PopularSources>('/sources/popular');\n    return response.data;\n  },\n};\n\n// News Analysis API\nexport const newsAPI = {\n  analyze: async (data: NewsAnalysisRequest): Promise<NewsAnalysisResponse> => {\n    const response = await api.post<NewsAnalysisResponse>('/news/analyze', data);\n    return response.data;\n  },\n\n  getSessions: async (): Promise<AnalysisSession[]> => {\n    const response = await api.get<AnalysisSession[]>('/news/sessions');\n    return response.data;\n  },\n\n  getSession: async (sessionId: number): Promise<NewsAnalysisResponse> => {\n    const response = await api.get<NewsAnalysisResponse>(`/news/sessions/${sessionId}`);\n    return response.data;\n  },\n\n  deleteSession: async (sessionId: number) => {\n    const response = await api.delete(`/news/sessions/${sessionId}`);\n    return response.data;\n  },\n};\n\n// Analysis API\nexport const analysisAPI = {\n  getStatistics: async (): Promise<UserStatistics> => {\n    const response = await api.get<UserStatistics>('/analysis/statistics');\n    return response.data;\n  },\n\n  getDashboard: async (): Promise<DashboardData> => {\n    const response = await api.get<DashboardData>('/analysis/dashboard');\n    return response.data;\n  },\n};\n\nexport default api; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}